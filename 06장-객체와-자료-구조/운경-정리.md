# 6ì¥ - ê°ì²´ì™€ ìë£Œ êµ¬ì¡°

## ìë£Œ ì¶”ìƒí™”

- ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•´ ì‚¬ìš©ìê°€ êµ¬í˜„ì„ ëª¨ë¥¸ ì±„ ìë£Œì˜ í•µì‹¬ì„ ì¡°ì‘í•  ìˆ˜ ìˆì–´ì•¼ ì§„ì •í•œ ì˜ë¯¸ì˜ í´ë˜ìŠ¤
    - êµ¬ì²´ì ì¸ Point í´ë˜ìŠ¤
        
        ```java
        public class Point { 
          public double x; 
          public double y;
        }
        ```
        
    - ì¶”ìƒì ì¸ Point ì¸í„°í˜ì´ìŠ¤
        
        ```java
        public interface Point {
          double getX();
          double getY();
          void setCartesian(double x, double y); 
          double getR();
          double getTheta();
          void setPolar(double r, double theta); 
        }
        ```
        
    - êµ¬ì²´ì ì¸ Vehicle í´ë˜ìŠ¤
        
        ```java
        public interface Vehicle {
        	double getFuelTankCapacityInGallons();
        	double getGallonsOfGasoline();
        }
        ```
        
    - ì¶”ìƒì ì¸ Vehicle í´ë˜ìŠ¤
        
        ```java
        public interface Vehicle {
        	double getPercentFuelRemaining();
        }
        ```
        
        - ì¶”ìƒì ìœ¼ë¡œ ì—°ë£Œ ìƒíƒœë¥¼ ë°±ë¶„ìœ¨ë¡œ ì „ë‹¬í•  ë¿, ë‚´ë¶€ì ì¸ ì •ë³´ì˜ ì¶œì²˜ëŠ” ë“œëŸ¬ë‚˜ì§€ ì•ŠìŒ

## ìë£Œ/ê°ì²´ ë¹„ëŒ€ì¹­

- (ìë£Œ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ëŠ”) ì ˆì°¨ì ì¸ ì½”ë“œëŠ” ê¸°ì¡´ ìë£Œ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë©´ì„œ ìƒˆ í•¨ìˆ˜ë¥¼ ì¶”ê°€í•˜ê¸° ì‰¬ìš°ë‚˜, ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ê¸°ëŠ” ì–´ë ¤ì›€
    
    ```java
    public class Square { 
      public Point topLeft; 
      public double side;
    }
    
    public class Rectangle { 
      public Point topLeft; 
      public double height; 
      public double width;
    }
    
    public class Circle { 
      public Point center; 
      public double radius;
    }
    
    public class Geometry {
      public final double PI = 3.141592653589793;
      
      public double area(Object shape) throws NoSuchShapeException {
        if (shape instanceof Square) { 
          Square s = (Square)shape; 
          return s.side * s.side;
        } else if (shape instanceof Rectangle) { 
          Rectangle r = (Rectangle)shape; 
          return r.height * r.width;
        } else if (shape instanceof Circle) {
          Circle c = (Circle)shape;
          return PI * c.radius * c.radius; 
        }
        throw new NoSuchShapeException(); 
      }
    }
    ```
    
- ê°ì²´ ì§€í–¥ ì½”ë“œëŠ” ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šìœ¼ë©´ì„œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ê¸°ëŠ” ì‰¬ìš°ë‚˜, ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ì¶”ê°€í•˜ê¸°ê°€ ì–´ë µë‹¤.
    
    ```java
    public class Square implements Shape { 
      private Point topLeft;
      private double side;
      
      public double area() { 
        return side * side;
      } 
    }
    
    public class Rectangle implements Shape { 
      private Point topLeft;
      private double height;
      private double width;
    
      public double area() { 
        return height * width;
      } 
    }
    
    public class Circle implements Shape { 
      private Point center;
      private double radius;
      public final double PI = 3.141592653589793;
    
      public double area() {
        return PI * radius * radius;
      } 
    }
    ```
    
- ì í•©í•œ ìƒí™©ì— ë”°ë¼ ë§ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”

## ë””ë¯¸í„° ë²•ì¹™

- ëª¨ë“ˆì€ ìì‹ ì´ ì¡°ì‘í•˜ëŠ” ê°ì²´ì˜ ì†ì‚¬ì •ì„ ëª°ë¼ì•¼ í•œë‹¤ëŠ” ë²•ì¹™
- ê°ì²´ëŠ” ìë£Œë¥¼ ìˆ¨ê¸°ê³  í•¨ìˆ˜ë¥¼ ê³µê°œ(ì¡°íšŒ í•¨ìˆ˜ë¡œ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ê³µê°œí•˜ë©´ ì•ˆëœë‹¤ëŠ” ì˜ë¯¸)
- "ì´ì›ƒì˜ ì´ì›ƒê³¼ ì´ì•¼ê¸°í•˜ì§€ ë§ˆë¼â€
- í´ë˜ìŠ¤ Cì˜ ë©”ì„œë“œ fëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê°ì²´ì˜ ë©”ì„œë“œë§Œ í˜¸ì¶œí•´ì•¼ í•œë‹¤
    - í´ë˜ìŠ¤ C
    - fê°€ ìƒì„±í•œ ê°ì²´
    - f ì¸ìˆ˜ë¡œ ë„˜ì–´ì˜¨ ê°ì²´
    - C ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì €ì¥ëœ ê°ì²´

### -ê¸°ì°¨ ì¶©ëŒ, ì¡ì¢… êµ¬ì¡°

- final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();ì™€ ê°™ì€ ì½”ë“œ
- ê°ì²´ë¼ë©´ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ìˆ¨ê²¨ì•¼ í•˜ë¯€ë¡œ ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•˜ì§€ë§Œ, ìë£Œ êµ¬ì¡°ë¼ë©´ ë‚´ë¶€ ë³€ìˆ˜ë¥¼ ë‹¹ì—°íˆ ë…¸ì¶œí•˜ë¯€ë¡œ ë””ë¯¸í„° ë²•ì¹™ì´ ì ìš©ë˜ì§€ ì•ŠìŒ
- ì ˆë°˜ì€ ê°ì²´, ì ˆë°˜ì€ ìë£Œ êµ¬ì¡°ì¸ ì¡ì¢… êµ¬ì¡°ëŠ” ì ˆëŒ€ì ìœ¼ë¡œ í”¼í•  ê²ƒ

### -êµ¬ì¡°ì²´ ê°ì¶”ê¸°

- ìœ„ì˜ outputDir ê²½ë¡œê°€ ì“°ì´ëŠ” ê³³ì„ ê°™ì€ ëª¨ë“ˆì—ì„œ ì°¾ì•„ ë³´ì•˜ë”ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œê°€ ë°œê²¬ë¨
    
    ```java
    String outFile = outputDir + "/" + className.replace('.', '/') + ".class"; 
    FileOutputStream fout = new FileOutputStream(outFile); 
    BufferedOutputStream bos = new BufferedOutputStream(fout);
    ```
    
- ë”°ë¼ì„œ ì„ì‹œ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¡œ ë¦¬íŒ©í† ë§
    
    ```java
    BufferedOutputStream bos = ctxt.createScratchFileStream(classFileName);
    ```
    

â†’ëª¨ë“ˆì€ ìì‹ ì´ ëª°ë¼ì•¼ í•˜ëŠ” ì—¬ëŸ¬ ê°ì²´ë¥¼ íƒìƒ‰í•  í•„ìš”ê°€ ì—†ì–´ì„œ ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•Šê²Œ ë¨

### -ìë£Œ ì „ë‹¬ ê°ì²´

- ê³µê°œ ë³€ìˆ˜ë§Œ ìˆê³  í•¨ìˆ˜ê°€ ì—†ëŠ” í´ë˜ìŠ¤(DTO, Data Transfer Object)
- ë°ì´í„°ë² ì´ìŠ¤ì™€ í†µì‹ í•˜ê±°ë‚˜ ì†Œì¼“ì—ì„œ ë°›ì€ ë©”ì‹œì§€ì˜ êµ¬ë¬¸ì„ ë¶„ì„í•˜ê¸° ìœ ìš©

### -í™œì„± ë ˆì½”ë“œ

- DTOì˜ íŠ¹ìˆ˜í•œ í˜•íƒœë¡œ ê¸°ë³¸ì ì¸ ì¡°íšŒ, ì„¤ì • í•¨ìˆ˜ ì´ì™¸ì— save, find ê°™ì€ íƒìƒ‰ í•¨ìˆ˜ë„ ì œê³µ
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ìœ¼ë©´ì„œ ë‚´ë¶€ ìë£Œ(í™œì„± ë ˆì½”ë“œì˜ ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ìˆ¨ê¸°ëŠ” ê°ì²´ëŠ” ë”°ë¡œ ìƒì„±
    
    ```java
    // ğŸ”¹ 1. Active Record (ë°ì´í„° êµ¬ì¡° ì—­í• ë§Œ ìˆ˜í–‰)
    @Entity
    class UserEntity {
        @Id @GeneratedValue
        private Long id;
        private String name;
        private int points;
    }
    
    // ğŸ”¹ 2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ëŠ” ë³„ë„ ê°ì²´ (UserEntityë¥¼ ê°ì‹¸ì„œ ì‚¬ìš©)
    class UserDomain {
        private final UserEntity userEntity;
    
        public UserDomain(UserEntity userEntity) {
            this.userEntity = userEntity;
        }
    
        public void addPoints(int amount) {
            if (amount < 0) {
                throw new IllegalArgumentException("í¬ì¸íŠ¸ëŠ” 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
            }
            userEntity.points += amount;
        }
    
        public UserEntity toEntity() {
            return userEntity;
        }
    }
    
    // EntityëŠ” ì—„ë°€íˆëŠ” ìˆœìˆ˜í•œ ë°ì´í„° ëª¨ë¸ë¡œ ìœ ì§€ë˜ì–´ 
    // ë‚´ë¶€ì ìœ¼ë¡œ save() ë©”ì†Œë“œë¥¼ ê°€ì§€ëŠ” í™œì„± ë ˆì½”ë“œì™€ëŠ” ë‹¤ë¥´ê¸´ í•¨
    ```